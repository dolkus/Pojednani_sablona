%%
%% Styl pro psani Vysokoskolskych kvalifikacnich praci
%% VUT v Brně
%%
%% Jakub Zlamal, zlamal@fme.vutbr.cz
%%
%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{VSKP}[2012/04/08 v1.3 VSKP VUT v Brně]


\def\fakultazkr#1{\edef\fakultazkrtxt{#1}}%fakulta
\def\fakulta#1{\edef\fakultatxt{#1}\edef\Fakultatxt{\uppercase{#1}}}%fakulta
\def\enfakulta#1{\edef\enfakultatxt{#1}\edef\Enfakultatxt{\uppercase{#1}}}%fakulta
\def\ustav#1{\edef\ustavtxt{#1}\edef\Ustavtxt{\uppercase{#1}}}%ustav
\def\enustav#1{\edef\enustavtxt{#1}\edef\Enustavtxt{\uppercase{#1}}}%ustav
\def\adresafakulta#1{\edef\adresafakultatxt{#1}\edef\Adresafakultatxt{\uppercase{#1}}}%fakulta
\def\fakultalogo#1{\def\fakultalogotxt{#1}}
\def\nabyvatel#1{\def\nabyvateltxt{#1}}

\def\nic{}
\def\nazev#1{
		\edef\NAZEVtxt{\uppercase{#1}}
    \def\nazevtxt{\let\break\nic\let\hfil\nic#1}
    \def\Nazevtxt{\let\break\nic\let\hfil\nic\NAZEVtxt}
    \def\nazevbrtxt{#1}\def\Nazevbrtxt{\NAZEVtxt}}% nazev
\def\ennazev#1{
		\edef\ENNAZEVtxt{\uppercase{#1}}
    \def\ennazevtxt{\let\break\nic\let\hfil\nic#1}
    \def\Ennazevtxt{\let\break\nic\let\hfil\nic\ENNAZEVtxt}
    \def\ennazevbrtxt{#1}\def\Ennazevbrtxt{\ENNAZEVtxt}}% nazev
\def\autor#1#2#3{\edef\autortxt{#1 #2#3}\edef\Autortxt{#1 \uppercase{#2}#3 }}% autor
\def\autorzkr#1{\edef\autorzkrtxt{#1} \edef\Autorzkrtxt{\uppercase{#1}} }% autor zkracene
\def\vedouci#1#2#3{\edef\vedoucitxt{#1 #2#3}\edef\Vedoucitxt{#1 \uppercase{#2}#3 }}% vedouci
\def\ustav#1{\edef\ustavtxt{#1}\edef\Ustavtxt{\uppercase{#1}}}%
\def\datumobhajoby#1{\edef\datumobhajobytxt{#1}}% datum obhajoby
\def\adresa#1{\edef\adresatxt{#1}}% adresa
\def\narozeni#1{\edef\narozenitxt{#1}}% narozeni
\def\muzzena#1{\edef\muzzenatxt{#1}}% muž žena
%%% \def\typprace#1{\edef\typpracetxt{#1}\edef\Typpracetxt{\uppercase{#1}}}% typprace
\long\def\abstrakt#1{\edef\abstrakttxt{#1}}%
\long\def\enabstrakt#1{\edef\enabstrakttxt{#1}}%
\def\klicovaslova#1{\edef\klicovaslovatxt{#1}}%
\def\enklicovaslova#1{\edef\enklicovaslovatxt{#1}}%
\def\pocettisk#1{\edef\pocettisktxt{#1}}%
\def\pocetelektr#1{\edef\pocetelektrtxt{#1}}%
\def\pocetletutajeni#1{\edef\letautajenitxt{#1}}%
\def\citacevedouci#1{\edef\citacevedoucitxt{#1}}% Vedouci dipl. prace do citace

% Prevod typu studia -> typ prace,
% v ciselniku se lisi en nazev u M a N typu studia
\def\typstudia#1{%
    \def\tstudia{#1}
    \def\vzortypu{N}
    \ifx\tstudia\vzortypu
        \edef\typpracetxt{master's thesis}
        \edef\entyppracetxt{diplomová práce}
    \else
        \edef\typpracetxt{neznámý typ studia: \tstudia}
        \edef\entyppracetxt{unknown studium type: \tstudia}
    \fi
    \def\vzortypu{B}
    \ifx\tstudia\vzortypu
        \edef\typpracetxt{bakalářská práce}
        \edef\entyppracetxt{bachelor's thesis}
    \fi
    \def\vzortypu{D}
    \ifx\tstudia\vzortypu
        \edef\typpracetxt{dizertační práce}
        \edef\entyppracetxt{doctoral thesis}
    \fi
    \def\vzortypu{M}
    \ifx\tstudia\vzortypu
        \edef\typpracetxt{diplomová práce}
        \edef\entyppracetxt{diploma thesis}
    \fi
    \edef\Typpracetxt{\uppercase{\typpracetxt}}
    \edef\Entyppracetxt{\uppercase{\entyppracetxt}}
}


%
%  vytvoreni titulni strany
%
\def\titul{%
\setcounter{page}{1}
\thispagestyle{empty}

\long\def\obrstextem##1##2{%
   \setbox1=\hbox{\includegraphics*[width=3cm,height=3cm,keepaspectratio]{##1}}
   \dimen0=\pagewidth
   \advance\dimen0 by -\oddsidemargin
   \advance\dimen0 by -\wd1
   \advance\dimen0 by -0.5em
   \setbox2=\vbox to \ht1{\hsize=\dimen0%
      ##2
   \vss
   }
   \wd2=\dimen0
   \noindent\hbox to \hsize{\box1\hskip0.5em\box2\hss}
}

{\flushleft

\obrstextem{FSI_Formalna_cast/todo.jpg}{%
\noindent{\Large \sf BRNO UNIVERSITY OF TECHNOLOGY\hfil}\par
\smallskip
\noindent{\small \sf VYSOKÉ UČENÍ TECHNICKÉ V BRNĚ}
}
\bgroup
\vskip1cm
\expandafter\obrstextem\expandafter{FSI_Formalna_cast/todo.jpg}{%
   \noindent{\sf \Fakultatxt}

   \smallskip
   \noindent{\sf \Ustavtxt}

   \vskip0.3cm
   \noindent{\small\sf \Enfakultatxt}

   \noindent{\small\sf \Enustavtxt}
}

\vskip3cm
{\advance\baselineskip by 6pt
\noindent{\Large\sf \Nazevbrtxt }

}

\noindent{\small\sf \Ennazevbrtxt }

\vfill
\noindent{\sf \Typpracetxt}

\noindent{\small\sf \Entyppracetxt}

\bigskip
\bigskip
% troska rozhodovani jak vytisknout autora a suprevizora
\setbox1=\hbox{\sf \Autortxt}
\setbox2=\hbox{\sf \Vedoucitxt}
\dimen0=\textwidth
\advance\dimen0 by -8cm%  6+2cm
\ifdim\wd1>\wd2
   \dimen1=\wd1
\else
   \dimen1=\wd2
\fi
\ifdim\dimen0<\dimen1
   % nevejde se mi tam jmeno autora nebo vedouciho protoze je moc dlouhe
   \noindent{\sf AUTHOR\hfill\hbox to \dimen1{\Autortxt\hss}}

\noindent{\small\sf AUTOR PRÁCE}

\bigskip
\noindent{\sf SUPERVISOR\hfill\hbox to \dimen1{\Vedoucitxt\hss}}

\noindent{\small\sf VEDOUCÍ PRÁCE}
\else
   \noindent{\sf \hbox to 6cm{AUTHOR\hss}\hskip2cm\Autortxt}

   \noindent{\small\sf AUTOR PRÁCE}

   \bigskip
   \noindent{\sf \hbox to 6cm{SUPERVISOR\hss}\hskip2cm\Vedoucitxt}

   \noindent{\small\sf VEDOUCÍ PRÁCE}
\fi

\vskip3cm
\noindent{\small\sf BRNO \the\year}
}
\egroup % End of flushleft
\eject
}

%
% abstrakty a klicova slova
%
\def\abstrakty{%
   \newpage
   \thispagestyle{empty}

\noindent{\bf Summary}

\abstrakttxt
\bigskip

\noindent{\bf Abstrakt}

\enabstrakttxt

\bigskip
\bigskip
%\goodbreak
\vbox{
\noindent{\bf  Keywords}

\klicovaslovatxt

\bigskip
\noindent{\bf Klíčová slova}

\enklicovaslovatxt
}
\nobreak
\vfill 
% Nasleduje ukazkova citace diplomove prace
\def\prvnivelke##1##2{\uppercase{##1}##2}
\noindent \Autorzkrtxt {\it \nazevtxt}. Brno: Vysoké učení technické v Brně, \fakultatxt, \the\year. %
\ifx\pocetstran\undefined
   ??
\else
   \pocetstran{}
\fi s. \citacevedoucitxt
\vskip3cm
\eject
}

\long\def\prohlaseni#1{
\bgroup
\pagestyle{empty}
\cleardoublepage
\egroup
\thispagestyle{empty}
\hbox{}
\vfill
#1
\bigskip
\bigskip

\hfill\autortxt\hskip3cm
\vskip2cm
\eject
}

\long\def\podekovani#1{
\bgroup
\pagestyle{empty}
\cleardoublepage
\egroup
\thispagestyle{empty}
\hbox{}
\vfill
#1
\bigskip
\bigskip

\hfill\autortxt\hskip3cm
\vskip2cm
\eject
}

\def\obsah{\setcounter{page}{1}\tableofcontents\vfill\eject}
\makeatletter
\def\spocitejstranky{
\protected@write\@auxout{}{\string\gdef\string\pocetstran{\thepage}}%
}
\makeatother

\AtEndDocument{\spocitejstranky}
